{% extends 'newref/base.html' %}
{% load static %}
{% load crispy_forms_tags %}


{% block title %}Décidons{% endblock %}

{% block head %}

{% endblock %}



{% block content %}

<nav aria-label="..." class="mb-5">
  <ul class="pagination">
    <li class="page-item active" aria-current="page">
      <span class="page-link">
        Configuration
        <span class="sr-only">(current)</span>
      </span>
    </li>
    <li class="page-item"><a class="page-link" href="{% url 'voteadmin_questions' ref.hash %}">Questions & Options</a></li>
    <li class="page-item"><a class="page-link" href="{% url 'voteadmin_votants' ref.hash %}">Liste des votants</a></li>
    <li class="page-item"><a class="page-link" href="{% url 'voteadmin_bulletins' ref.hash %}">Envoi des bulletins</a></li>
    <li class="page-item"><a class="page-link" href="{% url 'voteadmin_depouillement' ref.hash %}">Dépouillement</a></li>
  </ul>
</nav>


<div class="alert alert-info alert-dismissible fade show" role="alert">
  Cette page permet de débuter la configuration de la votation. Il est possible de revenir dessus tant que les bulletins n'ont pas été envoyés.
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>


<form method="post" action="{% url 'voteadmin' ref.hash %}">
  <fieldset {% if not ref.status == "CONFIG" %}disabled="disabled"{% endif %}>
  {% csrf_token %}
   {{form | crispy}}
   <button id="savebut" type="submit" class="btn btn-outline-primary">
      Enregistrer
    	<span hidden id="spinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>  
    </button>
  </fieldset>
</form>

<script type="text/javascript">
	$(document).ready(function () {
    

    $("form").bind("change paste keyup", function() {
        $("#savebut").attr('class', 'btn btn-warning');
    });

    $("#savebut").click(function() {
			$("#spinner").removeAttr('hidden');
		});

  });
</script>

{% endblock %}